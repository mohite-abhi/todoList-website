(()=>{"use strict";var e=function(e=[]){var t={};return t.tasks=JSON.parse(JSON.stringify(e)),t.taskStatus=new Array(e.length).fill(0),t.addTask=function(e){t.tasks.push(e),t.taskStatus.push(0)},t.completeTask=function(e){t.taskStatus[e]=1},t.removeTask=function(e){t.taskStatus.splice(e,1),t.tasks.splice(e,1)},t.show=function(){for(let e=0;e<t.tasks.length;e++)console.log(t.taskStatus[e]+" "+t.tasks[e])},t},t=function(e,t,s,i,n,o=!1){var r={};return r.title=e,r.description=t,r.dueDate=s,r.priority=i,r.checkList=n,r.isComplete=o,r},s=function(e,t=[]){var s={};return s.name=e,s.toDoLists=t,s.addToProject=function(e){s.toDoLists.push(e)},s.removeFromProject=function(e){s.toDoLists.splice(e,1)},s},i=function(i="anonymous"){var n={};return n.name=i,n.projects=[new s("default",[t("Getting started","have fun",new Date,1,e(["item 1","item 2"])),t("Again getting started","have fun again",new Date,1,e(["item 3","item 4"]))])],n.createNewProject=function(e){tempProj=s(e),n.projects.push(tempProj)},n.removeProject=function(e){n.projects.splice(e,1)},n},n=function(){var n={pushUpdate:function(){localStorage.setItem("user",JSON.stringify(this.user))},user:""};if(null==localStorage.getItem("user"))n.user=new i,n.pushUpdate();else{var o=JSON.parse(localStorage.user),r=new i(o.name);r.removeProject(0),o.projects.forEach((i=>{var n=new s(i.name);i.toDoLists.forEach((s=>{n.addToProject(new t(s.title,s.description,s.dueDate,s.priority,new e(s.checkList.tasks),s.isComplete))})),r.projects.push(n)})),n.user=r,n.pushUpdate()}return n}(),o=function(e,t=null){var s=document.createElement("div");return s.className=e,null!=t&&(s.innerHTML=t),s},r=function(e){var t=n.user.projects[e],s=0,i=function(){a(JSON.parse(this.parentNode.id))},r=function(){var e=JSON.parse(this.parentNode.id);n.user.projects[e[0]].toDoLists.splice([e[1]],1),n.pushUpdate(),document.getElementById(this.parentNode.id).remove()},c=function(){var e=document.getElementById(this.parentNode.id).childNodes[0],t=JSON.parse(this.parentNode.id);0==n.user.projects[t[0]].toDoLists[t[1]].isComplete?(e.innerHTML="&#10003;",n.user.projects[t[0]].toDoLists[t[1]].isComplete=!0):(e.innerHTML="&#9634;",n.user.projects[t[0]].toDoLists[t[1]].isComplete=!1),n.pushUpdate()};null!=t&&t.toDoLists.forEach((t=>{var n,a,d,p,l,u,h,m,f,k,g,v=(n=t.isComplete,a=t.title,d=t.description,p=t.dueDate.slice(0,10),l=o("tick",1==n?"&#10003;":"&#9634;"),u=o("title",a),h=o("description",d),m=o("duedate",p),f=o("delete","X"),(k=o("taskItem")).appendChild(l),k.appendChild(u),k.appendChild(h),k.appendChild(m),k.appendChild(f),k);v.childNodes[0].onclick=c,v.childNodes[1].onclick=i,v.childNodes[2].onclick=i,v.childNodes[3].onclick=i,v.childNodes[4].onclick=r,g=v,document.getElementById("taskList").appendChild(g),v.id=JSON.stringify([e,s++])}))},a=function(e){document.getElementById("taskList").innerHTML="",r(e[0]);var t,s,i,a,c,d,p,l,u=document.getElementById(JSON.stringify(e)),h=(s=1==(t=n.user.projects[e[0]].toDoLists[e[1]]).isComplete?"&#10003;":"&#9634;",i=o("tick",s),a=o("title",t.title),c=o("description",t.description),d=o("duedate",t.dueDate.slice(0,10)),p=o("checklist","something"),(l=o("detailedTaskItem")).appendChild(i),l.appendChild(a),l.appendChild(c),l.appendChild(d),l.appendChild(p),l);u.parentNode.replaceChild(h,u)};r(0),n.user.projects.forEach((e=>{var t,s;t=e.name,s=o("projectItem",t),document.getElementById("list").appendChild(s)}))})();