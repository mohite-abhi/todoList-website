(()=>{"use strict";var e,t=function(e=[],t=null){var s={};return s.tasks=JSON.parse(JSON.stringify(e)),s.taskStatus=null==t?new Array(e.length).fill(0):JSON.parse(JSON.stringify(t)),s.addTask=function(e){s.tasks.push(e),s.taskStatus.push(0)},s.completeTask=function(e){s.taskStatus[e]=1},s.removeTask=function(e){s.taskStatus.splice(e,1),s.tasks.splice(e,1)},s.show=function(){for(let e=0;e<s.tasks.length;e++)console.log(s.taskStatus[e]+" "+s.tasks[e])},s},s=function(e,t,s,i,n,o=!1){var a={};return a.title=e,a.description=t,a.dueDate=s,a.priority=i,a.checkList=n,a.isComplete=o,a},i=function(e,t=[]){var s={};return s.name=e,s.toDoLists=t,s.addToProject=function(e){s.toDoLists.push(e)},s.removeFromProject=function(e){s.toDoLists.splice(e,1)},s},n=function(e="anonymous"){var n={};return n.name=e,n.projects=[new i("default",[s("Getting started","have fun",JSON.stringify(new Date).slice(1,11),1,t(["item 1","item 2"])),s("Again getting started","have fun again",JSON.stringify(new Date).slice(1,11),1,t(["item 3","item 4"]))])],n.createNewProject=function(e){tempProj=i(e),n.projects.push(tempProj)},n.removeProject=function(e){n.projects.splice(e,1)},n},o=e={pushUpdate:function(){localStorage.setItem("user",JSON.stringify(this.user))},user:"",initiatePage:function(){if(null==localStorage.getItem("user"))e.user=new n,e.pushUpdate();else{var o=JSON.parse(localStorage.user),a=new n(o.name);a.removeProject(0),o.projects.forEach((e=>{var n=new i(e.name);e.toDoLists.forEach((e=>{n.addToProject(new s(e.title,e.description,e.dueDate,e.priority,new t(e.checkList.tasks,e.checkList.taskStatus),e.isComplete))})),a.projects.push(n)})),e.user=a,e.pushUpdate()}}},a=function(e,t=null){var s=document.createElement("div");return s.className=e,null!=t&&(s.innerHTML=t),s},r=function(){var e=document.getElementById(this.parentNode.id).childNodes[0],t=JSON.parse(this.parentNode.id);0==o.user.projects[t[0]].toDoLists[t[1]].isComplete?(e.innerHTML="&#10003;",o.user.projects[t[0]].toDoLists[t[1]].isComplete=!0):(e.innerHTML="&#9634;",o.user.projects[t[0]].toDoLists[t[1]].isComplete=!1),o.pushUpdate()},c=function(){var e=document.getElementById(this.id).childNodes[0],t=JSON.parse(this.id);0==o.user.projects[t[0]].toDoLists[t[1]].checkList.taskStatus[t[2]]?(e.innerHTML="&#10003;",o.user.projects[t[0]].toDoLists[t[1]].checkList.taskStatus[t[2]]=!0):(e.innerHTML="&#9634;",o.user.projects[t[0]].toDoLists[t[1]].checkList.taskStatus[t[2]]=!1),o.pushUpdate()},d=function(e){var t=o.user.projects[e],s=0,i=function(){l(JSON.parse(this.parentNode.id))},n=function(){var e=JSON.parse(this.parentNode.id);o.user.projects[e[0]].toDoLists.splice([e[1]],1),o.pushUpdate(),document.getElementById(this.parentNode.id).remove()};null!=t&&t.toDoLists.forEach((t=>{var o,c,d,l,p,u,h,m,k,f,N,g=(o=t.isComplete,c=t.title,d=t.description,l=t.dueDate.slice(0,10),p=a("tick",1==o?"&#10003;":"&#9634;"),u=a("title",c),h=a("description",d),m=a("duedate",l),k=a("delete","X"),(f=a("taskItem")).appendChild(p),f.appendChild(u),f.appendChild(h),f.appendChild(m),f.appendChild(k),f);g.childNodes[0].onclick=r,g.childNodes[1].onclick=i,g.childNodes[2].onclick=i,g.childNodes[3].onclick=i,g.childNodes[4].onclick=n,N=g,document.getElementById("taskList").appendChild(N),g.id=JSON.stringify([e,s++])}))},l=function(e){document.getElementById("taskList").innerHTML="",d(e[0]);var t,s,i,n,l,p,u,h,m=document.getElementById(JSON.stringify(e)),k=(t=o.user.projects[e[0]].toDoLists[e[1]],s=1==t.isComplete?"&#10003;":"&#9634;",i=a("tick",s),n=a("title",t.title),l=a("description",t.description),p=a("duedate",t.dueDate.slice(0,10)),u=function(e){var t=a("checklist");for(let o=0;o<e.tasks.length;o++){var s=a("tick");s.innerHTML=0==e.taskStatus[o]?"&#9634;":"&#10003;";var i=a("detail");i.innerHTML=e.tasks[o];var n=a("checklistitem");n.appendChild(s),n.appendChild(i),t.appendChild(n)}return t}(t.checkList),(h=a("detailedTaskItem")).appendChild(i),h.appendChild(n),h.appendChild(l),h.appendChild(p),h.appendChild(u),h);k.id=m.id,k.childNodes[0].onclick=r;var f=0;k.childNodes[4].childNodes.forEach((t=>{t.id=JSON.stringify([e[0],e[1],f++]),t.onclick=c})),m.parentNode.replaceChild(k,m)};o.initiatePage(),d(0),o.user.projects.forEach((e=>{var t,s;t=e.name,s=a("projectItem",t),document.getElementById("list").appendChild(s)}))})();