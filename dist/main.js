(()=>{"use strict";var e,t=function(e=[],t=null){var i={};return i.tasks=JSON.parse(JSON.stringify(e)),i.taskStatus=null==t?new Array(e.length).fill(0):JSON.parse(JSON.stringify(t)),i.addTask=function(e){i.tasks.push(e),i.taskStatus.push(0)},i.completeTask=function(e){i.taskStatus[e]=1},i.removeTask=function(e){i.taskStatus.splice(e,1),i.tasks.splice(e,1)},i.show=function(){for(let e=0;e<i.tasks.length;e++)console.log(i.taskStatus[e]+" "+i.tasks[e])},i},i=function(e,t,i,s,n,a=!1){var r={};return r.title=e,r.description=t,r.dueDate=i,r.priority=s,r.checkList=n,r.isComplete=a,r},s=function(e,t=[]){var i={};return i.name=e,i.toDoLists=t,i.addToProject=function(e){i.toDoLists.push(e)},i.removeFromProject=function(e){i.toDoLists.splice(e,1)},i},n=function(e="anonymous"){var n={};return n.name=e,n.projects=[new s("default",[i("Getting started","have fun",JSON.stringify(new Date).slice(1,11),1,t(["item 1","item 2"])),i("Again getting started","have fun again",JSON.stringify(new Date).slice(1,11),1,t(["item 3","item 4"]))]),new s("default2",[i("Getting started2","have fun2",JSON.stringify(new Date).slice(1,11),1,t(["item 12","item 22"])),i("Again getting started2","have fun again2",JSON.stringify(new Date).slice(1,11),1,t(["item 32","item 42"]))])],n.createNewProject=function(e){tempProj=s(e),n.projects.push(tempProj)},n.removeProject=function(e){n.projects.splice(e,1)},n},a=e={pushUpdate:function(){localStorage.setItem("user",JSON.stringify(this.user))},user:"",initiatePage:function(){if(null==localStorage.getItem("user"))e.user=new n,e.pushUpdate();else{var a=JSON.parse(localStorage.user),r=new n(a.name);r.removeProject(0),r.removeProject(0),a.projects.forEach((e=>{var n=new s(e.name);e.toDoLists.forEach((e=>{n.addToProject(new i(e.title,e.description,e.dueDate,e.priority,new t(e.checkList.tasks,e.checkList.taskStatus),e.isComplete))})),r.projects.push(n)})),e.user=r,e.pushUpdate()}}},r=function(e,t=null){var i=document.createElement("div");return i.className=e,null!=t&&(i.innerHTML=t),i},o=function(){var e=document.getElementById(this.parentNode.id).childNodes[0],t=JSON.parse(this.parentNode.id);0==a.user.projects[t[0]].toDoLists[t[1]].isComplete?(e.innerHTML="&#10003;",a.user.projects[t[0]].toDoLists[t[1]].isComplete=!0):(e.innerHTML="&#9634;",a.user.projects[t[0]].toDoLists[t[1]].isComplete=!1),a.pushUpdate()},c=function(){var e=document.getElementById(this.id).childNodes[0],t=JSON.parse(this.id);0==a.user.projects[t[0]].toDoLists[t[1]].checkList.taskStatus[t[2]]?(e.innerHTML="&#10003;",a.user.projects[t[0]].toDoLists[t[1]].checkList.taskStatus[t[2]]=!0):(e.innerHTML="&#9634;",a.user.projects[t[0]].toDoLists[t[1]].checkList.taskStatus[t[2]]=!1),a.pushUpdate()},d=function(e){var t=a.user.projects[e],i=0,s=function(){l(JSON.parse(this.parentNode.id))},n=function(){var e=JSON.parse(this.parentNode.id);a.user.projects[e[0]].toDoLists.splice([e[1]],1),a.pushUpdate(),document.getElementById(this.parentNode.id).remove()};null!=t&&t.toDoLists.forEach((t=>{var a,c,d,l,p,u,h,m,f,k,N,g=(a=t.isComplete,c=t.title,d=t.description,l=t.dueDate.slice(0,10),p=r("tick",1==a?"&#10003;":"&#9634;"),u=r("title",c),h=r("description",d),m=r("duedate",l),f=r("delete","X"),(k=r("taskItem")).appendChild(p),k.appendChild(u),k.appendChild(h),k.appendChild(m),k.appendChild(f),k);g.childNodes[0].onclick=o,g.childNodes[1].onclick=s,g.childNodes[2].onclick=s,g.childNodes[3].onclick=s,g.childNodes[4].onclick=n,g.id=JSON.stringify([e,i++]),N=g,document.getElementById("taskList").appendChild(N)}))},l=function(e){document.getElementById("taskList").innerHTML="",d(e[0]);var t,i,s,n,l,p,u,h,m=document.getElementById(JSON.stringify(e)),f=(t=a.user.projects[e[0]].toDoLists[e[1]],i=1==t.isComplete?"&#10003;":"&#9634;",s=r("tick",i),n=r("title",t.title),l=r("description",t.description),p=r("duedate",t.dueDate.slice(0,10)),u=function(e){var t=r("checklist");for(let a=0;a<e.tasks.length;a++){var i=r("tick");i.innerHTML=0==e.taskStatus[a]?"&#9634;":"&#10003;";var s=r("detail");s.innerHTML=e.tasks[a];var n=r("checklistitem");n.appendChild(i),n.appendChild(s),t.appendChild(n)}return t}(t.checkList),(h=r("detailedTaskItem")).appendChild(s),h.appendChild(n),h.appendChild(l),h.appendChild(p),h.appendChild(u),h);f.id=m.id,f.childNodes[0].onclick=o;var k=0;f.childNodes[4].childNodes.forEach((t=>{t.id=JSON.stringify([e[0],e[1],k++]),t.onclick=c})),m.parentNode.replaceChild(f,m)},p=function(){var e,t,i,s;a.initiatePage(),d(0),e=a.user.projects,t=0,i=e=>{var t=JSON.parse(e.srcElement.parentNode.id);document.getElementById("taskList").innerHTML="",d(t)},s=function(){var e=JSON.parse(this.parentNode.id);a.user.projects.splice([e[0]],1),a.pushUpdate(),document.getElementById("taskList").innerHTML="",document.getElementById("list").innerHTML="",p()},e.forEach((e=>{var n=function(e){var t=r("name",e),i=r("del",e);i.innerHTML="x",t.innerHTML=e;var s=r("projectItem");return s.appendChild(t),s.appendChild(i),s}(e.name);n.id=JSON.stringify([t++]),document.getElementById("list").appendChild(n),n.childNodes[0].onclick=i,n.childNodes[1].onclick=s}))};p()})();