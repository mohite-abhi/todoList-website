(()=>{"use strict";var e,t=function(e=[],t=null){var n={};return n.tasks=JSON.parse(JSON.stringify(e)),n.taskStatus=null==t?new Array(e.length).fill(0):JSON.parse(JSON.stringify(t)),n.addTask=function(e){n.tasks.push(e),n.taskStatus.push(0)},n.completeTask=function(e){n.taskStatus[e]=1},n.removeTask=function(e){n.taskStatus.splice(e,1),n.tasks.splice(e,1)},n.show=function(){for(let e=0;e<n.tasks.length;e++)console.log(n.taskStatus[e]+" "+n.tasks[e])},n},n=function(e,t,n,i,s,o=!1){var r={};return r.title=e,r.description=t,r.dueDate=n,r.priority=i,r.checkList=s,r.isComplete=o,r},i=function(e,t=[]){var n={};return n.name=e,n.toDoLists=t,n.addToProject=function(e){n.toDoLists.push(e)},n.removeFromProject=function(e){n.toDoLists.splice(e,1)},n},s=function(e="anonymous"){var s={};return s.name=e,s.projects=[new i("default",[n("Getting started","have fun",JSON.stringify(new Date).slice(1,11),1,t(["item 1","item 2"])),n("Again getting started","have fun again",JSON.stringify(new Date).slice(1,11),1,t(["item 3","item 4"]))]),new i("default2",[n("Getting started2","have fun2",JSON.stringify(new Date).slice(1,11),1,t(["item 12","item 22"])),n("Again getting started2","have fun again2",JSON.stringify(new Date).slice(1,11),1,t(["item 32","item 42"]))])],s.createNewProject=function(e){tempProj=i(e),s.projects.push(tempProj)},s.removeProject=function(e){s.projects.splice(e,1)},s},o=e={pushUpdate:function(){localStorage.setItem("user",JSON.stringify(this.user))},user:"",initiatePage:function(){if(null==localStorage.getItem("user"))e.user=new s,e.pushUpdate();else{var o=JSON.parse(localStorage.user),r=new s(o.name);r.removeProject(0),r.removeProject(0),o.projects.forEach((e=>{var s=new i(e.name);e.toDoLists.forEach((e=>{s.addToProject(new n(e.title,e.description,e.dueDate,e.priority,new t(e.checkList.tasks,e.checkList.taskStatus),e.isComplete))})),r.projects.push(s)})),e.user=r,e.pushUpdate()}}},r=function(e,t=null){var n=document.createElement("div");return n.className=e,null!=t&&(n.innerHTML=t),n},a=function(){var e=document.getElementById(this.parentNode.id).childNodes[0],t=JSON.parse(this.parentNode.id);0==o.user.projects[t[0]].toDoLists[t[1]].isComplete?(e.innerHTML="&#10003;",o.user.projects[t[0]].toDoLists[t[1]].isComplete=!0):(e.innerHTML="&#9634;",o.user.projects[t[0]].toDoLists[t[1]].isComplete=!1),o.pushUpdate()},c=function(){var e=document.getElementById(this.id).childNodes[0],t=JSON.parse(this.id);0==o.user.projects[t[0]].toDoLists[t[1]].checkList.taskStatus[t[2]]?(e.innerHTML="&#10003;",o.user.projects[t[0]].toDoLists[t[1]].checkList.taskStatus[t[2]]=!0):(e.innerHTML="&#9634;",o.user.projects[t[0]].toDoLists[t[1]].checkList.taskStatus[t[2]]=!1),o.pushUpdate()},d=function(e){var t=o.user.projects[e],n=0,i=function(){l(JSON.parse(this.parentNode.id))},s=function(){var e=JSON.parse(this.parentNode.id);o.user.projects[e[0]].toDoLists.splice([e[1]],1),o.pushUpdate(),document.getElementById(this.parentNode.id).remove()};null!=t&&t.toDoLists.forEach((t=>{var o,c,d,l,p,u,m,h,f,k,g,N=(o=t.isComplete,c=t.title,d=t.description,l=t.dueDate.slice(0,10),p=r("tick",1==o?"&#10003;":"&#9634;"),u=r("title",c),m=r("description",d),h=r("duedate",l),f=r("delete","X"),(k=r("taskItem")).appendChild(p),k.appendChild(u),k.appendChild(m),k.appendChild(h),k.appendChild(f),k);N.childNodes[0].onclick=a,N.childNodes[1].onclick=i,N.childNodes[2].onclick=i,N.childNodes[3].onclick=i,N.childNodes[4].onclick=s,N.id=JSON.stringify([e,n++]),g=N,document.getElementById("taskList").appendChild(g)}))},l=function(e){document.getElementById("taskList").innerHTML="",d(e[0]);var t,n,i,s,l,p,u,m,h=document.getElementById(JSON.stringify(e)),f=(t=o.user.projects[e[0]].toDoLists[e[1]],n=1==t.isComplete?"&#10003;":"&#9634;",i=r("tick",n),s=r("title",t.title),l=r("description",t.description),p=r("duedate",t.dueDate.slice(0,10)),u=function(e){var t=r("checklist");for(let o=0;o<e.tasks.length;o++){var n=r("tick");n.innerHTML=0==e.taskStatus[o]?"&#9634;":"&#10003;";var i=r("detail");i.innerHTML=e.tasks[o];var s=r("checklistitem");s.appendChild(n),s.appendChild(i),t.appendChild(s)}return t}(t.checkList),(m=r("detailedTaskItem")).appendChild(i),m.appendChild(s),m.appendChild(l),m.appendChild(p),m.appendChild(u),m);f.id=h.id,f.childNodes[0].onclick=a;var k=0;f.childNodes[4].childNodes.forEach((t=>{t.id=JSON.stringify([e[0],e[1],k++]),t.onclick=c})),h.parentNode.replaceChild(f,h)},p=function(e){var t=o.user.projects,n=0,s=e=>{var t=document.getElementsByClassName("name");for(let n=0;n<t.length;n++)t[n].style.backgroundColor=n==e?"blue":"brown"},a=e=>{var t=JSON.parse(e.srcElement.parentNode.id);s(t),document.getElementById("taskList").innerHTML="",d(t)},c=function(){var e=JSON.parse(this.parentNode.id);o.user.projects.splice([e[0]],1),o.pushUpdate(),document.getElementById("taskList").innerHTML="",document.getElementById("list").innerHTML="",u()};document.getElementById("projButton").onclick=()=>{var e,t,n,s=document.getElementById("list"),a=document.getElementsByClassName("projectItem");if("projInput"!=a[0].childNodes[0].className){var c=(e=function(e,t){var n=document.createElement("input");return n.className="projInput",n.autofocus=!0,n.maxLength=20,n}(),t=r("projSave","&#8629;"),(n=r("projectItem")).appendChild(e),n.appendChild(t),n);c.childNodes[1].onclick=function(e){var t=i(e.srcElement.parentNode.childNodes[0].value);o.user.projects.push(t),document.getElementById("list").innerHTML="",document.getElementById("taskList").innerHTML="",p(0),o.pushUpdate()},s.insertBefore(c,a[0])}},t.forEach((e=>{var t=function(e){var t=r("name",e),n=r("del",e);n.innerHTML="x",t.innerHTML=e;var i=r("projectItem");return i.appendChild(t),i.appendChild(n),i}(e.name);t.id=JSON.stringify([n++]),document.getElementById("list").appendChild(t),t.childNodes[0].onclick=a,t.childNodes[1].onclick=c})),s(e),d(e)},u=function(){o.initiatePage(),p(0)};u()})();