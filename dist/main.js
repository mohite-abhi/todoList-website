(()=>{"use strict";var e,t,i,s,n=function(e=[],t=null){var i={};return i.tasks=JSON.parse(JSON.stringify(e)),i.taskStatus=null==t?new Array(e.length).fill(0):JSON.parse(JSON.stringify(t)),i.addTask=function(e){i.tasks.push(e),i.taskStatus.push(0)},i.completeTask=function(e){i.taskStatus[e]=1},i.removeTask=function(e){i.taskStatus.splice(e,1),i.tasks.splice(e,1)},i.show=function(){for(let e=0;e<i.tasks.length;e++)console.log(i.taskStatus[e]+" "+i.tasks[e])},i},a=function(e,t,i,s,n,a=!1){var r={};return r.title=e,r.description=t,r.dueDate=i,r.priority=s,r.checkList=n,r.isComplete=a,r},r=function(e,t=[]){var i={};return i.name=e,i.toDoLists=t,i.addToProject=function(e){i.toDoLists.push(e)},i.removeFromProject=function(e){i.toDoLists.splice(e,1)},i},o=function(e="anonymous"){var t={};return t.name=e,t.projects=[new r("default",[a("Getting started","have fun",JSON.stringify(new Date).slice(1,11),1,n(["item 1","item 2"])),a("Again getting started","have fun again",JSON.stringify(new Date).slice(1,11),1,n(["item 3","item 4"]))]),new r("default2",[a("Getting started2","have fun2",JSON.stringify(new Date).slice(1,11),1,n(["item 12","item 22"])),a("Again getting started2","have fun again2",JSON.stringify(new Date).slice(1,11),1,n(["item 32","item 42"]))])],t.createNewProject=function(e){tempProj=r(e),t.projects.push(tempProj)},t.removeProject=function(e){t.projects.splice(e,1)},t},c=e={pushUpdate:function(){localStorage.setItem("user",JSON.stringify(this.user))},user:"",initiatePage:function(){if(null==localStorage.getItem("user"))e.user=new o,e.pushUpdate();else{var t=JSON.parse(localStorage.user),i=new o(t.name);i.removeProject(0),i.removeProject(0),t.projects.forEach((e=>{var t=new r(e.name);e.toDoLists.forEach((e=>{t.addToProject(new a(e.title,e.description,e.dueDate,e.priority,new n(e.checkList.tasks,e.checkList.taskStatus),e.isComplete))})),i.projects.push(t)})),e.user=i,e.pushUpdate()}}},d=function(e,t=null){var i=document.createElement("div");return i.className=e,null!=t&&(i.innerHTML=t),i},l=function(){var e=document.getElementById(this.parentNode.id).childNodes[0],t=JSON.parse(this.parentNode.id);0==c.user.projects[t[0]].toDoLists[t[1]].isComplete?(e.innerHTML="&#10003;",c.user.projects[t[0]].toDoLists[t[1]].isComplete=!0):(e.innerHTML="&#9634;",c.user.projects[t[0]].toDoLists[t[1]].isComplete=!1),c.pushUpdate()},p=function(){var e=document.getElementById(this.id).childNodes[0],t=JSON.parse(this.id);0==c.user.projects[t[0]].toDoLists[t[1]].checkList.taskStatus[t[2]]?(e.innerHTML="&#10003;",c.user.projects[t[0]].toDoLists[t[1]].checkList.taskStatus[t[2]]=!0):(e.innerHTML="&#9634;",c.user.projects[t[0]].toDoLists[t[1]].checkList.taskStatus[t[2]]=!1),c.pushUpdate()},u=function(e){var t=c.user.projects[e],i=0,s=function(){h(JSON.parse(this.parentNode.id))},n=function(){var e=JSON.parse(this.parentNode.id);c.user.projects[e[0]].toDoLists.splice([e[1]],1),c.pushUpdate(),document.getElementById(this.parentNode.id).remove()};null!=t&&t.toDoLists.forEach((t=>{var a,r,o,c,p,u,h,m,f,k,g,N=(a=t.isComplete,r=t.title,o=t.description,c=t.dueDate.slice(0,10),p=d("tick",1==a?"&#10003;":"&#9634;"),u=d("title",r),h=d("description",o),m=d("duedate",c),f=d("delete","X"),(k=d("taskItem")).appendChild(p),k.appendChild(u),k.appendChild(h),k.appendChild(m),k.appendChild(f),k);N.childNodes[0].onclick=l,N.childNodes[1].onclick=s,N.childNodes[2].onclick=s,N.childNodes[3].onclick=s,N.childNodes[4].onclick=n,N.id=JSON.stringify([e,i++]),g=N,document.getElementById("taskList").appendChild(g)}))},h=function(e){document.getElementById("taskList").innerHTML="",u(e[0]);var t,i,s,n,a,r,o,h,m=document.getElementById(JSON.stringify(e)),f=(t=c.user.projects[e[0]].toDoLists[e[1]],i=1==t.isComplete?"&#10003;":"&#9634;",s=d("tick",i),n=d("title",t.title),a=d("description",t.description),r=d("duedate",t.dueDate.slice(0,10)),o=function(e){var t=d("checklist");for(let a=0;a<e.tasks.length;a++){var i=d("tick");i.innerHTML=0==e.taskStatus[a]?"&#9634;":"&#10003;";var s=d("detail");s.innerHTML=e.tasks[a];var n=d("checklistitem");n.appendChild(i),n.appendChild(s),t.appendChild(n)}return t}(t.checkList),(h=d("detailedTaskItem")).appendChild(s),h.appendChild(n),h.appendChild(a),h.appendChild(r),h.appendChild(o),h);f.id=m.id,f.childNodes[0].onclick=l;var k=0;f.childNodes[4].childNodes.forEach((t=>{t.id=JSON.stringify([e[0],e[1],k++]),t.onclick=p})),m.parentNode.replaceChild(f,m)};c.initiatePage(),u(0),t=c.user.projects,i=0,s=e=>{var t=JSON.parse(e.srcElement.parentNode.id);document.getElementById("taskList").innerHTML="",u(t)},t.forEach((e=>{var t=function(e){var t=d("name",e),i=d("del",e);i.innerHTML="x",t.innerHTML=e;var s=d("projectItem");return s.appendChild(t),s.appendChild(i),s}(e.name);t.id=JSON.stringify([i++]),document.getElementById("list").appendChild(t),t.onclick=s}))})();